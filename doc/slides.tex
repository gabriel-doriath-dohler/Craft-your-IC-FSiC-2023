%! TEX TS-program = lualatex
%! TeX root = doc/slides.tex

\documentclass[aspectratio=169]{beamer}

\newcommand{\names}{Gabriel \textsc{Doriath Döhler}, Constantin \textsc{Gierczak--Galle}}

\title{Craft your IC:\\Learning hardware design in
Minecraft\footnote{\tiny{}\reproduce}\\\small{} École Normale Supérieure, Paris (ENS Ulm)}
\author{\names}
\institute{FSiC $2023$}
\date{July $12$, $2023$}

\usepackage{fontspec}
\setmonofont{FreeMono}
\usepackage{amsmath}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{qrcode}
\usepackage{minted}
\usepackage{caption}

\newcommand{\rv}{\texttt{RISC-V}}
\newcommand{\vrv}{\texttt{V-\rv}}
\newcommand{\hw}{HW}
% FIXME: Update this with the new link
% Also, add a clickable link for the handouts
\newcommand{\rvlink}{https://github.com/gabriel-doriath-dohler/V-RISC-V}

\lstset{
  language=haskell,
  escapeinside={&}{&},
  columns=fixed,
  extendedchars,
  basewidth={0.5em,0.45em},
  basicstyle=\ttfamily,
  mathescape,
}

\begin{document}
\beamertemplatenavigationsymbolsempty
\addtobeamertemplate{navigation symbols}{}{%
	\usebeamerfont{footline}%
	\usebeamercolor[fg]{footline}%
	\hspace{1em}%
	\insertframenumber/\inserttotalframenumber
}

\maketitle

\begin{frame}[fragile]
	\frametitle{Motivation}

	\textbf{Learning about \hw{} design}

\end{frame}

\begin{frame}[fragile]
	\frametitle{Table of Contents}
	\tableofcontents
\end{frame}

\section{Motivation (cst1?)}

\section{Logic circuits in Minecraft (gdd)}
\begin{frame}
\end{frame}

\section{ISA (cst1)}
\begin{frame}
	\frametitle{Instruction Set Architecture}
	%\vrv
	%\texttt{(Very-RISC)-V}

	$8$-bit registers:

	\begin{itemize}
		\item \texttt{\%0}: always $00000000$ (from the \rv{} spec)
		\item \texttt{\%1}: always $11111111$ (Gives \texttt{inc},
		      \texttt{dec}, \texttt{not})
		\item \texttt{\%2}-\texttt{\%14}: GP registers
		\item \texttt{\%15}: Random register
	\end{itemize}

	\pause

	Instructions:
	\begin{itemize}
		\item \textbf{Binops}: \texttt{add}, \texttt{sub}, \texttt{or},
		      \texttt{xor}: $3$ register operands
		\item \textbf{Jumps}: inconditionnal or on previous operation
		      \texttt{oveflow}/\texttt{negative}/\texttt{zero}
		\item \texttt{loadi}: Load immediate to register
		\item \textbf{RAM}: Load and store
	\end{itemize}
\end{frame}

\section{An $8$-bit CPU (???)}
\begin{frame}
	Rapidly list all components
\end{frame}

\begin{frame}
	\frametitle{ROM and PC}
	\begin{columns}
		\begin{column}{0.5\textwidth}
			\begin{itemize}
				\item ??? number of instructions?
				\item How are the instructions stored?
			\end{itemize}
		\end{column}
		\begin{column}{0.5\textwidth}
			\begin{figure}
				An Image
				\caption*{The ALU}
			\end{figure}
		\end{column}
	\end{columns}
\end{frame}

\begin{frame}
	\frametitle{Registers}
	\begin{columns}
		\begin{column}{0.5\textwidth}
			\begin{itemize}
				\item All registers doubled for double--read
				\item Formal verification
			\end{itemize}
		\end{column}
		\begin{column}{0.5\textwidth}
			\begin{figure}
				An Image
				\caption*{Register file}
			\end{figure}
		\end{column}
	\end{columns}
\end{frame}

\begin{frame}
	\frametitle{I/O}
	\begin{columns}
		\begin{column}{0.5\textwidth}
			\begin{itemize}
				\item \hw{} design in MC
				\item Formal verification
			\end{itemize}
		\end{column}
		\begin{column}{0.5\textwidth}
			\begin{figure}
				An Image
				\caption*{I/O: screen}
			\end{figure}
		\end{column}
	\end{columns}
\end{frame}

\begin{frame}
	\frametitle{ALU}
	\begin{columns}
		\begin{column}{0.5\textwidth}
			\begin{itemize}
				\item Combinatorial
				\item Compact design for speed.
			\end{itemize}
		\end{column}
		\begin{column}{0.5\textwidth}
			\begin{figure}
				An Image
				\caption*{The ALU}
			\end{figure}
		\end{column}
	\end{columns}
\end{frame}

\section{Toolchain (cst1)}
\begin{frame}[fragile]
	\frametitle{Toolchain}
	\begin{itemize}
		\item Assembler
	\end{itemize}
	\begin{minted}{asm}
            # thing
            store @12 %5 #test
            add %0 %2 %30
            jmp abcsd
            or %0 %15 %1
            loadi $1 %17
            sub %0 %0 %5
            nop
        .issou
            mov %2 %5
            jz issou # Jump
        \end{minted}
\end{frame}

\section{Verification (gdd)}
\begin{frame}
	\frametitle{Verifying HW semantics}
	Notes: On n'a pas de HDL (expliquer pourquoi)
	Mentionner l'état de l'art (~inexistant) en génération de circuit MC à
	partir de HDL.

	Donc pour vérifier le CPU, on vérifie... Le CPU! Pas la source.
	Donc on raisonne directement sur le """silicium"""
\end{frame}

\begin{frame}
	\frametitle{ALU}
\end{frame}

\begin{frame}
	\frametitle{Verifying HW semantics}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Questions?}
	\begin{columns}
		\begin{column}{0.5\textwidth}
			Recap

			\begin{itemize}
				\item \hw{} design in MC
				\item Formal verification
			\end{itemize}
		\end{column}
		\begin{column}{0.5\textwidth}
			\begin{figure}
				\caption*{Craft your IC project}
				\qrcode[height=4cm]{\rvlink}
			\end{figure}
		\end{column}
	\end{columns}
	\begin{centering}
		\small \names{}
	\end{centering}
\end{frame}

\newpage
\bibliographystyle{plain}
\bibliography{ref}

\end{document}
